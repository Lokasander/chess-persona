<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Personality Quiz</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 600px;
            margin: auto;
            padding: 20px;
            background: #f7f2eb;
            color: #333;
        }
        .start-screen, .quiz-screen, .result-screen, .loading-screen {
            text-align: center;
            transition: all 0.5s ease;
        }
        .choice {
            background-color: #a0522d;
            color: white;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            border-radius: 5px;
            transition: transform 0.2s, background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .choice:hover {
            background-color: #8b4513;
            transform: translateY(-2px);
        }
        button {
            padding: 10px 20px;
            margin-top: 20px;
            font-size: 16px;
            cursor: pointer;
            background: #5a3921;
            color: white;
            border: none;
            border-radius: 5px;
            transition: all 0.3s;
        }
        button:hover {
            background: #3d2715;
            transform: scale(1.05);
        }
        img {
            width: 100%;
            height: auto;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        .chess-piece {
            max-width: 200px;
            margin: 0 auto;
        }
        .loading-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(247, 242, 235, 0.9);
            z-index: 100;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid #a0522d;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin {
            100% { transform: rotate(360deg); }
        }
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0;
            z-index: 999;
            animation: confetti 3s ease-in-out;
        }
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        .result-title {
            font-size: 2em;
            margin: 20px 0;
            color: #5a3921;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            animation: fadeIn 1s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div class="start-screen">
        <img src="https://i.ibb.co/HLGCVHGS/chess-opening.png" alt="chess-opening"/><br/><br/>
        <button onclick="startQuiz()">Begin Your Royal Journey</button>
    </div>

    <!-- Quiz Screen -->
    <div class="quiz-screen" style="display: none;">
        <h2 id="questionText"></h2>
        <div id="choices"></div>
        <button id="nextButton" onclick="nextQuestion()" disabled>Next</button>
        <button id="goBackButton" onclick="goBack()" style="display: none;">Go Back</button>
    </div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <h2>Calculating Your Royal Destiny...</h2>
        <p>Consulting with the royal advisors...</p>
    </div>

    <!-- Result Screen -->
    <div class="result-screen" style="display: none;">
        <div class="result-title" id="resultTitle"></div>
        <div id="resultImage"></div>
        <div id="resultDescription"></div>
        <div>
            <button onclick="share('facebook')">Share to Facebook</button>
            <button onclick="share('instagram')">Share to Instagram</button>
            <button onclick="share('x')">Share to X</button>
            <button onclick="replay()">Play Again</button>
        </div>
        <p>Thank you for playing &copy; 2025 Bread and Random</p>
    </div>

    <script>
        const questions = [
            { q: "The enemy has declared war on your kingdom. What are your thoughts?", a: [
                { text: "Here we go again. What a prick.", values: ['I'] },
                { text: "I would say 'Thank the fuck yes!' You don't see me running, do you?", values: ['E'] }
            ]},
            { q: "The war has officially begun. Rumor has it that the enemy has doubled their weapons and tripled their soldiers. What should we do now?", a: [
                { text: "Double it and give it to the next person? Haha, kidding! We've quadrupled ours, of course!", values: ['6', '2'] },
                { text: "Find out where they got the weapons from and who supports them financially. Now the real war begins.", values: ['8', '3'] },
                { text: "I need to look at the budget. Also, where is this rumor coming from?", values: ['4'] },
                { text: "I'm not risking losing this damn war. We need a solid strategy.", values: ['1'] }
            ]},
            { q: "The situation is worse than expected. We've lost over one hundred thousand troops and gained zero square meters of land. The enemy is laughing over our allies' dead bodies.", a: [
                { text: "Shouting at the sky. Aaaargh!", values: ['E', '6'] },
                { text: "*Sitting silently in thought*", values: ['I', '8', '2'] },
                { text: "This is injustice! There must be malice behind this absurd massacre! Why are we so weak compared to them?", values: ['E', '1'] },
                { text: "Write aggressive letters and complain to third parties.", values: ['I', '4', '3'] }
            ]},
            { q: "To everyone's surprise, a powerful but distant kingdom decides to lend us a hand.", a: [
                { text: "Distant water can't put out a nearby fire in time. It's appreciated, but we still have much to consider.", values: ['I'] },
                { text: "Just accept it. What else could I possibly lose at this point?", values: ['E'] }
            ]},
            { q: "Our plan works, and there's a call for a ceasefire.", a: [
                { text: "No, we've just begun. I will stop at nothing.", values: ['8'] },
                { text: "A cornered enemy has nothing to lose. Let's use this time to rest and prepare a backup plan.", values: ['4', '1'] },
                { text: "We can rest, but while they're at it, I don't promise I won't bite.", values: ['2', '3'] },
                { text: "This seems like a sign that we're winning. Time to celebrate!", values: ['6'] }
            ]},
            { q: "Finally, the war has ended, and guess what? You won!", a: [
                { text: "As if there was any other outcome. Hahahaha!", values: ['2'] },
                { text: "Yes, but at what cost? I'm not unhappy, but I can't say I'm satisfied either.", values: ['4'] },
                { text: "Finally. I'm exhausted.", values: ['1', '6'] },
                { text: "Good, but we still have much to do. They can expect a massive fine at their ugly palace by next Monday.", values: ['8', '3'] }
            ]},
            { q: "The kingdom is peaceful once again, thanks to your hard work. What do you want as a reward?", a: [
                { text: "Gold! Horses! Land! The holy trinity of life.", values: ['2'] },
                { text: "I want my sweetheart. I need a hug. One more day without my baby and I'll die - and then you might too.", values: ['6', '3'] },
                { text: "First, let's see who worked hardest to win this war and ensure I get the most reward.", values: ['1', '8'] },
                { text: "We got plenty of gold from the enemy, so more gold. And since it was a tough fight, a vacation would be nice too.", values: ['4'] }
            ]},
            { q: "You're enjoying your time when a letter arrives. They're proposing an appeasement marriage! You must make a decision...", a: [
                { text: "I'm a little busy right now. Let's say I don't have to make this damn decision.", values: ['I'] },
                { text: "Who else is single? Not me, though.", values: ['E'] }
            ]},
            { q: "The marriage deal went well. Their princess married one of our kingdom's most infamous princes. It's the grandest wedding of the century, and everyone is celebrating - including you.", a: [
                { text: "Quietly enjoying the party while looking out the castle window for an escape route.", values: ['I', '4', '8'] },
                { text: "Dancing with everybody.", values: ['E', '1', '6'] },
                { text: "If you need me, I'll be at the main buffet table.", values: ['I', '3'] },
                { text: "Screw the wedding. Tonight is about me and bae's 110th honeymoon.", values: ['E', '2'] }
            ]},
            { q: "As the night draws to a close, share your life wisdom with the world.", a: [
                { text: "Viva la vida!", values: ['2'] },
                { text: "All is fair in love and war - and as you know, I win both.", values: ['8', '6'] },
                { text: "Have you seen my cat? He's been missing for three days.", values: ['1'] },
                { text: "Love people like you have nothing to lose, and you'll realize you have everything to lose. This stupid war and wedding nearly bankrupted us.", values: ['3', '4'] }
            ]}
        ];

        const outcomes = {
            King: { 
                img: '<img src="https://i.ibb.co/fdHVVm4F/king.png" alt="king" class="chess-piece"/>',
                title: "You are the <strong>King</strong>!",
                desc: "Majestic and commanding, you lead with authority. Your strategic mind and decisive nature make you the natural ruler of the board.",
                sequences: [['I', '6']] 
            },
            Queen: { 
                img: '<img src="https://i.ibb.co/Lz0H2HvL/queen.png" alt="queen" class="chess-piece"/>',
                title: "You are the <strong>Queen</strong>!",
                desc: "Powerful and versatile, you dominate the battlefield. Your ability to adapt and influence makes you the most formidable piece on the board.",
                sequences: [['E', '8']] 
            },
            Bishop: { 
                img: '<img src="https://i.ibb.co/sv2yPG79/bishop.png" alt="bishop" class="chess-piece"/>',
                title: "You are the <strong>Bishop</strong>!",
                desc: "Wise and calculated, you move with purpose. Your unique perspective and strategic thinking make you invaluable to any cause.",
                sequences: [['I', '4']] 
            },
            Rook: { 
                img: '<img src="https://i.ibb.co/FqyPRFhn/rook.png" alt="rook" class="chess-piece"/>',
                title: "You are the <strong>Rook</strong>!",
                desc: "Strong and straightforward, you're the backbone of any strategy. Your reliability and power in direct confrontation are unmatched.",
                sequences: [['E', '3']] 
            },
            Knight: { 
                img: '<img src="https://i.ibb.co/QFGZ9Dky/knight.png" alt="knight" class="chess-piece"/>',
                title: "You are the <strong>Knight</strong>!",
                desc: "Unpredictable and daring, you move in mysterious ways. Your unconventional approach often catches opponents off guard.",
                sequences: [['E', '2']] 
            },
            Pawn: { 
                img: '<img src="https://i.ibb.co/604Y46MJ/pawn.png" alt="pawn" class="chess-piece"/>',
                title: "You are the <strong>Pawn</strong>!",
                desc: "Humble yet full of potential, you're the soul of the game. With determination, you can overcome any obstacle and even become royalty.",
                sequences: [['I', '1']] 
            }
        };

        let currentQuestion = 0;
        let userChoices = [];
        let selected = null;

        function startQuiz() {
            document.querySelector('.start-screen').style.display = 'none';
            document.querySelector('.quiz-screen').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            if (!questions[currentQuestion]) return;
            const q = questions[currentQuestion];
            document.getElementById('questionText').innerText = q.q;
            const choicesContainer = document.getElementById('choices');
            choicesContainer.innerHTML = '';
            q.a.forEach((choice, index) => {
                const div = document.createElement('div');
                div.className = 'choice';
                div.innerText = choice.text;
                div.onclick = () => selectChoice(index);
                choicesContainer.appendChild(div);
            });
            document.getElementById('nextButton').disabled = true;
            document.getElementById('goBackButton').style.display = currentQuestion > 0 ? 'inline-block' : 'none';
        }

        function selectChoice(index) {
            selected = index;
            document.getElementById('nextButton').disabled = false;
            document.querySelectorAll('.choice').forEach((el, i) => {
                el.style.opacity = i === index ? '1' : '0.6';
            });
        }

        function nextQuestion() {
            if (selected !== null) {
                const chosen = questions[currentQuestion].a[selected];
                userChoices = userChoices.concat(chosen.values);
                selected = null;
                currentQuestion++;
                if (currentQuestion < questions.length) {
                    showQuestion();
                } else {
                    showLoadingScreen();
                    setTimeout(showResult, 2000); // Show loading for 2 seconds
                }
            }
        }

        function showLoadingScreen() {
            document.querySelector('.quiz-screen').style.display = 'none';
            document.getElementById('loadingScreen').style.display = 'flex';
        }

        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.animationDuration = Math.random() * 2 + 2 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        function showResult() {
            document.getElementById('loadingScreen').style.display = 'none';
            document.querySelector('.result-screen').style.display = 'block';
            
            const sequenceCounts = {};
            Object.entries(outcomes).forEach(([type, { sequences }]) => {
                sequenceCounts[type] = 0;
                sequences.forEach(seq => {
                    for (let i = 0; i < userChoices.length - 1; i++) {
                        if (userChoices[i] === seq[0] && userChoices[i+1] === seq[1]) {
                            sequenceCounts[type]++;
                        }
                    }
                });
            });
            
            let maxCount = 0;
            let resultType = 'Pawn';
            
            Object.entries(sequenceCounts).forEach(([type, count]) => {
                if (count > maxCount) {
                    maxCount = count;
                    resultType = type;
                }
            });
            
            if (maxCount > 0) {
                const tiedTypes = Object.entries(sequenceCounts)
                    .filter(([_, count]) => count === maxCount)
                    .map(([type]) => type);
                
                if (tiedTypes.length > 1) {
                    const iCount = userChoices.filter(v => v === 'I').length;
                    const eCount = userChoices.filter(v => v === 'E').length;
                    if (iCount > eCount) {
                        resultType = tiedTypes.find(type => outcomes[type].sequences.some(seq => seq[0] === 'I')) || resultType;
                    }
                }
            }
            
            const result = outcomes[resultType] || outcomes['Pawn'];
            document.getElementById('resultTitle').innerHTML = result.title;
            document.getElementById('resultImage').innerHTML = result.img;
            document.getElementById('resultDescription').innerHTML = `<p>${result.desc}</p>`;
            createConfetti();
        }

        function goBack() {
            currentQuestion--;
            const lastChoices = questions[currentQuestion].a[selected].values;
            userChoices = userChoices.slice(0, -lastChoices.length);
            selected = null;
            showQuestion();
        }

        function replay() {
            currentQuestion = 0;
            userChoices = [];
            selected = null;
            document.querySelector('.result-screen').style.display = 'none';
            document.querySelector('.start-screen').style.display = 'block';
        }

        function share(platform) {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`I got ${document.getElementById('resultTitle').innerText} in the Chess Personality Quiz!`);
            if (platform === 'facebook') {
                window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
            } else if (platform === 'instagram') {
                alert('To share on Instagram, please save the image and upload it manually to your story.');
            } else if (platform === 'x') {
                window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
            }
        }
    </script>
</body>
</html>